# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ UNICODE –ü–£–¢–ï–ô

## ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!

**–ü—Ä–æ–±–ª–µ–º–∞:** OpenCV –ø–æ–∫–∞–∑—ã–≤–∞–ª –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ `‚ï®–§‚ï®‚ñë‚ï§–ò‚ï®‚ñë` –≤–º–µ—Å—Ç–æ —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –Ω–µ –º–æ–≥ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `unicode_utils.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —Å Unicode –ø—É—Ç—è–º–∏.

## üõ†Ô∏è –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `ui/unicode_utils.py`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `imread_unicode()` - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `imwrite_unicode()` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–ø–∏—Å—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
- ‚úÖ –¢—Ä–∏ –º–µ—Ç–æ–¥–∞ —á—Ç–µ–Ω–∏—è: PIL ‚Üí cv2.imdecode ‚Üí –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –º–æ–¥—É–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ `ui/face_processor_simple.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `imread_unicode()`
- ‚úÖ `ui/face_processor.py` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `imread_unicode()`
- ‚úÖ `ui/insight_sorter.py` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `ui/photo_viewer.py` - –¥–æ–±–∞–≤–ª–µ–Ω fallback —á–µ—Ä–µ–∑ PIL

## üöÄ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ú–µ—Ç–æ–¥ 1: PIL (–æ—Å–Ω–æ–≤–Ω–æ–π)
```python
with Image.open(filepath) as pil_image:
    pil_image = ImageOps.exif_transpose(pil_image)
    cv_image = np.array(pil_image.convert('RGB'))
    return cv2.cvtColor(cv_image, cv2.COLOR_RGB2BGR)
```

### –ú–µ—Ç–æ–¥ 2: cv2.imdecode (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
```python
with open(filepath, 'rb') as f:
    file_bytes = f.read()
np_array = np.frombuffer(file_bytes, np.uint8)
return cv2.imdecode(np_array, flags)
```

### –ú–µ—Ç–æ–¥ 3: –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑–µ—Ä–≤)
```python
with tempfile.NamedTemporaryFile(suffix=ext, delete=False) as temp_file:
    temp_path = temp_file.name
shutil.copy2(filepath, temp_path)
return cv2.imread(temp_path, flags)
```

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç:
- ‚úÖ –ß–∏—Ç–∞—Ç—å —Ñ–∞–π–ª—ã —Å —Ä—É—Å—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—É—Ç–∏ —Å Unicode —Å–∏–º–≤–æ–ª–∞–º–∏
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é EXIF

## üéØ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞:
```cmd
cd D:\photo
python main_simple.py
```

–¢–µ–ø–µ—Ä—å –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ `can't open/read file` –¥–æ–ª–∂–Ω—ã –∏—Å—á–µ–∑–Ω—É—Ç—å!

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ –ø–æ EXIF
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

## üéâ –ì–û–¢–û–í–û!

–ü—Ä–æ–±–ª–µ–º–∞ —Å Unicode –ø—É—Ç—è–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!
